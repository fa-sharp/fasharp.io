---
import { Image } from "astro:assets";
export interface Props {
  url: string;
  title: string;
  date: Date;
  description: string;
  image?: {
    url: string;
    alt: string;
  };
}
const { url, title, date, description, image } = Astro.props;

const dateFormatter = new Intl.DateTimeFormat("en-US", {
  timeZone: "UTC",
  month: "short",
  day: "numeric",
  year: "numeric",
});
const formattedDate = dateFormatter.format(date);
---

<a href={url} class="preview">
  <li>
    <div class="preview-heading">
      <h2 class="preview-title" transition:name={title}>
        {title}
      </h2>
      <div>
        {formattedDate}
      </div>
    </div>
    <div class="preview-description">{description}</div>
    {
      image && (
        <Image
          class="preview-image"
          src={image.url}
          alt={image.alt}
          width={700}
          height={200}
        />
      )
    }
  </li>

  <style>
    a {
      color: black;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    :global(.dark) a {
      color: white;
    }
    .preview {
      position: relative;

      min-height: 8rem;
      max-width: 40rem;

      padding: 1rem;
      border-radius: var(--radius);
      box-shadow: var(--card-shadow);

      overflow: hidden;
    }
    .preview-heading {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    .preview-title {
      margin: 0;
    }
    .preview-image {
      position: absolute;
      inset: 0;
      z-index: -1;

      object-fit: cover;
      opacity: 15%;
    }
  </style>
</a>
